# 文件夹功能说明

## 功能概述

现在你可以像手机桌面一样，通过拖拽图标来创建和管理文件夹了！

## 如何使用

### 创建文件夹

1. **拖动一个图标到另一个图标上**
   - 按住鼠标左键拖动一个图标
   - 将它拖到另一个图标上并释放
   - 系统会自动创建一个包含这两个图标的文件夹

2. **文件夹默认名称**
   - 新创建的文件夹默认名称为"新文件夹"
   - 可以通过右键菜单重命名

### 添加图标到文件夹

- 拖动任意图标到已存在的文件夹上
- 图标会自动添加到该文件夹中

### 打开文件夹

- 点击文件夹图标
- 会弹出对话框显示文件夹内的所有图标
- 点击文件夹内的图标即可打开对应网站

### 管理文件夹

#### 重命名文件夹
- 右键点击文件夹
- 选择"重命名"
- 输入新名称

#### 从文件夹中移除图标
- 打开文件夹
- 将鼠标悬停在图标上
- 点击右上角的 ❌ 按钮
- 图标会被移回到网格中

#### 删除文件夹
- 右键点击文件夹
- 选择"删除"
- 确认删除

### 文件夹自动解散

- 当文件夹只剩下 2 个图标时
- 移除其中一个图标会自动解散文件夹
- 剩余的图标会回到网格中

## 文件夹外观

- 文件夹显示为一个渐变色背景的方块
- 自动显示文件夹内前 4 个图标的缩略图
- 支持拖拽排序和跨页面移动

## 技术实现

### 数据结构

```typescript
interface FolderItem {
  id: string;
  name: string;
  type: 'folder';
  items: IconItem[];
}
```

### 核心组件

- `components/folder-item.tsx` - 文件夹组件
- `components/draggable-grid.tsx` - 支持文件夹的网格组件
- `lib/drag-handlers.ts` - 拖拽逻辑处理

### 拖拽逻辑

1. 检测拖拽目标是否为图标
2. 如果是图标，创建新文件夹
3. 如果是文件夹，添加到文件夹
4. 支持跨页面拖拽到文件夹

## 注意事项

- 文件夹数据会自动保存到 KV 存储
- 支持多标签页同步
- 文件夹可以像普通图标一样拖拽和排序
- 文件夹不能嵌套（文件夹内不能包含文件夹）
